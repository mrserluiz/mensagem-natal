<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÑ Uma Mensagem est√° esperando por voc√™ üéÑ</title>

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #132f22, #030b06);
  color: #f3f7f5;
  font-family: 'Georgia', serif;
  overflow-x: hidden;
}

.container {
  max-width: 820px;
  margin: 60px auto;
  padding: 28px;
  background: rgba(0,0,0,0.55);
  border-radius: 14px;
  box-shadow: 0 0 30px rgba(255,255,255,0.08);
}

h1 {
  text-align: center;
  font-size: 1.6em;
}

.contador {
  text-align: center;
  margin: 20px 0 30px;
  font-size: 1.1em;
  letter-spacing: 1px;
  color: #d7ede2;
}

#revealButton {
  display: block;
  margin: 20px auto;
  padding: 12px 20px;
  font-size: 1em;
  border: none;
  border-radius: 8px;
  background: #d7ede2;
  color: #132f22;
  cursor: pointer;
  transition: opacity 0.5s;
}

#revealButton:hover { background: #c4ded5; }

.assinatura {
  text-align: right;
  margin-top: 40px;
  font-style: italic;
  opacity: 0;
  transition: opacity 4s ease;
}

.cursor {
  display: inline-block;
  margin-left: 2px;
  animation: blink 1s infinite;
}

#debugBox {
  position: fixed;
  bottom: 12px;
  left: 12px;
  opacity: 0.25;
  transition: opacity 0.3s ease;
  z-index: 999;
}

#debugBox:hover { opacity: 1; }

#debugInput {
  background: rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.2);
  color: #fff;
  padding: 6px 10px;
  font-size: 0.8em;
  border-radius: 6px;
  outline: none;
  width: 160px;
}

@keyframes blink { 0%{opacity:1}50%{opacity:0}100%{opacity:1} }
</style>
</head>

<body>

<div class="container">
  <h1>üéÑ Algo especial est√° guardado aqui üéÅ </h1>
  <div class="contador" id="contador"></div>
  <div id="mensagem"></div>
  <button id="revealButton">üéÅ Revelar Mensagem</button>
</div>

<!-- Debug -->
<div id="debugBox">
  <input type="text" id="debugInput" placeholder="‚åò comando secreto">
</div>

<!-- Audio -->
<audio id="audioBackground" loop></audio>
<audio id="audioReveal"></audio>

<script>
// ================= CONFIG =================
const dataLiberacao = new Date(2025, 11, 25, 0, 2, 0); // 25/12/2025 00:02
const storageKey = "mensagemRevelada";

// ================= TEXTOS =================
const textoCifrado =
  [
  "J√≥ f√≥cz ra ykdf oco wd yfbmzje t qf hhvuzra zy mcsso ptyo.",
"Czsks hqt qbt tchg vvtt eukpbcra, fqpfyo avtrdzmrr.",
"Cqx yjcvz xrsgrg ztbgvxs, rmv jgbsz fvhbs bfe iqx et pzg, cs zkcfs fgqf izq ypgqk oc vkncs csgxv.",
"Vxfrd lbgzy tb√™ wz dgsxk, fgz wt gpmpfe akp√¥qqc, fgz wt vzftff fnhbzdtzt.",
"Jpwsr ts rpuo g fzycmu vyxkbwt tzgnwgg trr uqbvzm, rq dvmfrfc, rq mccyprz, rq sfytrdse vtsky.",
"Dmsd jq tgbdm vbtfzhq jgcrqz cst hspt ds brgpx, rq hyyzt xqbb rglz gj vgrc.",
"Rq thhzfg fzxx z ggszrfc tgx xrfcmf ts ftppq, cs gzoqr √† etvxf√™ozz.",
"√áv√™ rq jwv gqgq hv zrs wkqw lffy gvtgxtf y kf lszd ffyy xgsnvgg qhsyq bbrfyx.",
"D zlb cs vksdb bfy p bb xzr gqvygvv z mtjcs.",
"Sg vtfxzqs ph xgvqyyvr, xt rfrlt, rfd rq vpc√™ qgrz.",
"Zvhq gkmz kvm rz zlrwx xrd q mvm rbl ptzq z gqj ty qzqy.",
"T zz√™ dsdyl gr wfbivv mlf tpp hiy, rmts xt xppss yxxz btp hdhvsy wrn hcfkq zgzav.",
"Jdkq z√¢rz vrxt pq dvpxs z qk xr hswnfqfzw dvw jxxtvvx.",
"Fqg rzct dmtxg x bts bts fypbhksl, xypdss wpzyrg sg vtgntgg hdbfyx.",
"Vjfq sb wgdvtrb wv tzhvcyx bxs tvyynzr wgsx vkpzh fws zsvm tfd√ßvv bppfpz jtyjvqhz rq hskwm.",
"Jtswb pprfdy.",
"Qd zgzxz ztqz dzhx zy bzxw vyxlhhs, ztdfrg az xwspjbrf jgfr.",
"Fqzjtyx avds, vmvbfv ksdz jskkbf b khffbf.",
"Tnyzf x bfe ztkp, tyvqx vgmghf t bggvryx xgrz qk vgtczw.",
"Cvrh fz qyppbb tv dtxzsz fzxx fvrkbh tbt hdfcttzv.",
"Rzygr jfkz, sx fzdfe bvrfdg.",
"Stpvv rfd rp wbg jgpc ptyo uqjv, whldg tgbx fqpfhs.",
"Hfszgt qg qkzddr jgfrz, ngfr ggm czx ds kpbqpzz.",
"Fhgz rz zssbgpdtf.",
"Hsd zsnxzqz pqx aof√™ dzn lzzf z bgdcm kgg kgyv.",
"Bb ztqzf gvdzhx, zxxc.",
"Jx qxpjwbbf xrd gzdgm fvpdrs jgfrz.",
"Jtswb zdkp qzjv fbgxtgyv tppfpz pgrz, gyljz t fzxxzqv.",
"Xg zdgvt zshqz qk bts bts jgfrz.",
"M hx wfpfxk zpwxr vchbg, fbgcszq ts tsr bfdj qthx.",
"Hyqlcf tzsssfq z vvrhtf wrn bgdj zthzrg, ggm zs mxry zpsf.",
"Zgkz Xksrz, zg tbgdvt fzhbgg gsp ztqz trgsxk zvr lzjh.",
"Ksw jgfrz rzqv tdx tgpdrt pwg gk.",
"Vdkz jgfrz bfe zs bzkdr gspg pqf gkdvftz, pzqrfkz, zf√™ gkdvftz.",
"Jdkq zvr lzjh.",
  ];

const linhas = [
"H√° algo em voc√™ que me acalma e me desarma ao mesmo tempo.",
"Algo que n√£o pede explica√ß√£o, apenas presen√ßa.",
"Nos seus gestos simples e nas suas mensagens do dia a dia, encontro um lugar seguro.",
"No jeito leve com que voc√™ entra na minha rotina, eu me sinto em casa.",
"Quando penso em voc√™, n√£o penso em perfei√ß√£o, penso nas suas falas verdadeiras.",
"Gosto de como a nossa hist√≥ria acontece sem pressa, no cuidado e na aten√ß√£o.",
"Nas pequenas coisas do dia a dia, voc√™ me deixa chegar √† sua vida.",
"Nos risos fora de hora e nas noites cansadas que terminam em carinho, mesmo √† dist√¢ncia.",
"At√© nos dias em que o sono vence e ainda assim queremos continuar conversando.",
"Voc√™ me ensinou que estar junto tamb√©m √© respeitar o tempo do outro.",
"O cansa√ßo e o sil√™ncio tamb√©m podem ser formas de cuidado.",
"Te ver se divertir, se soltar e rir de voc√™ mesma me alegra e me faz rir junto.",
"Quando voc√™ se abre e confia em mim nos seus piores momentos, eu fico de cora√ß√£o aberto.",
"N√£o quero s√≥ os seus melhores dias, quero voc√™ inteira.",
"Nos dias leves e nos dif√≠ceis.",
"Se eu pudesse escolher, estaria ao seu lado para cuidar, acolher e dividir cada detalhe.",
"Mesmo os detalhes mais simples.",
"Neste Natal, agrade√ßo por voc√™ existir na minha vida do jeito que √©.",
"Esse jeito n√£o deve mudar, pois √© por ele que sou apaixonado.",
"Agrade√ßo por me permitir sentir, criar confian√ßa e aprender a crescer.",
"O que sinto por voc√™ √© tranquilo, forte e verdadeiro.",
"√â escolher estar, cuidar e seguir construindo, dia ap√≥s dia.",
"Quero que voc√™ se sinta amada, respeitada e segura.",
"Quero ser carinho, verdade e um companheiro de cora√ß√£o aberto.",
"Hoje e sempre.",
];

const assinatura = "‚Äî Do seu Tabacudo de S√£o Paulo, S. Luiz";

// ================= ELEMENTOS =================
const mensagem = document.getElementById("mensagem");
const contador = document.getElementById("contador");
const revealButton = document.getElementById("revealButton");
const audioBackground = document.getElementById("audioBackground");
const audioReveal = document.getElementById("audioReveal");

let revelando = false;
let debugForcar = false;

// ================= AUDIO =================
audioBackground.src = "background.mp3";
audioReveal.src = "reveal.mp3";

// ================= FUN√á√ÉO PRINCIPAL =================
function atualizar() {
  const agora = new Date();

  // Debug
  if (debugForcar && !revelando) { iniciarRevelacao(); return; }

  if (agora >= dataLiberacao) {
    contador.innerHTML = "‚ú® A mensagem foi revelada ‚ú®";
    if (!revelando) iniciarRevelacao();
    return;
  }

  if (!revelando) { mensagem.innerHTML = `<p class="hidden">${textoCifrado}</p>`; }

  const diff = dataLiberacao - agora;
  const d = Math.floor(diff / 1000 / 60 / 60 / 24);
  const h = Math.floor((diff / 1000 / 60 / 60) % 24);
  const m = Math.floor((diff / 1000 / 60) % 60);
  const s = Math.floor((diff / 1000) % 60);
  contador.innerHTML = `‚è≥ Algo ser√° revelado em ${d}d ${h}h ${m}m ${s}s`;
}

// ================= REVELA√á√ÉO =================
const caracteres = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%&*";
function letraAleatoria(){ return caracteres.charAt(Math.floor(Math.random()*caracteres.length)); }

let linhaAtual = 0, charAtual = 0, textoAtual = "", decodificando = false;

function iniciarRevelacao() {
  if(revelando) return;
  revelando = true;
  localStorage.setItem(storageKey,"true");
  mensagem.textContent="";
  audioBackground.pause();
  audioReveal.play().catch(()=>{});
  revealButton.style.opacity = 0;
  setTimeout(()=>{ revealButton.style.display="none"; },500);
  linhaAtual = 0; charAtual = 0; textoAtual = ""; decodificando=false;
  digitarTexto();
}

function digitarTexto() {
  if(linhaAtual < linhas.length){
    const linha = linhas[linhaAtual];
    if(charAtual < linha.length){
      if(!decodificando){
        decodificando=true;
        let tentativas=0;
        const intervalo = setInterval(()=>{
          tentativas++;
          const textoFake = textoAtual + letraAleatoria();
          mensagem.innerHTML = textoFake + '<span class="cursor">|</span>';
          if(tentativas>4){
            clearInterval(intervalo);
            textoAtual += linha.charAt(charAtual);
            charAtual++;
            decodificando=false;
            digitarTexto();
          }
        },40);
      }
    } else {
      textoAtual += "\n\n";
      mensagem.innerHTML = textoAtual + '<span class="cursor">|</span>';
      linhaAtual++;
      charAtual=0;
      setTimeout(digitarTexto,600);
    }
  } else {
    mensagem.innerHTML=textoAtual;
    const sign=document.createElement("div");
    sign.className="assinatura";
    sign.textContent=assinatura;
    mensagem.appendChild(sign);
    setTimeout(()=>{ sign.style.opacity=1; },800);
  }
}

// ================= NEVE =================
function criarNeve(){
  const floco=document.createElement("div");
  floco.className="snowflake";
  floco.innerHTML="‚ùÑ";
  floco.style.left=Math.random()*window.innerWidth+"px";
  floco.style.animationDuration=(6+Math.random()*6)+"s";
  floco.style.fontSize=(10+Math.random()*18)+"px";
  document.body.appendChild(floco);
  setTimeout(()=>floco.remove(),12000);
}
setInterval(criarNeve,350);

// ================= DEBUG =================
const debugInput=document.getElementById("debugInput");
debugInput.addEventListener("keydown",(e)=>{
  if(e.key==="Enter"){
    if(debugInput.value.trim().toLowerCase()==="flor de gyovana"){
      debugForcar=true;
      debugInput.value="";
      debugInput.placeholder="‚úî comando aceito";
      atualizar();
    } else debugInput.value="";
  }
});

// ================= BOT√ÉO REVELAR =================
revealButton.addEventListener("click", ()=>{
  audioBackground.play().catch(()=>{});
  const agora = new Date();
  if(agora >= dataLiberacao || debugForcar){
    iniciarRevelacao();
  }
});

// ================= INICIAL =================
if(localStorage.getItem(storageKey)==="true"){
  iniciarRevelacao();
} else {
  setInterval(atualizar,1000);
  atualizar();
}
</script>

</body>
</html>
