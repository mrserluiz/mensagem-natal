<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÑ Uma Mensagem est√° esperando por voc√™ üéÑ</title>

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #132f22, #030b06);
  color: #f3f7f5;
  font-family: 'Georgia', serif;
  overflow-x: hidden;
}

.container {
  max-width: 820px;
  margin: 60px auto;
  padding: 28px;
  background: rgba(0,0,0,0.55);
  border-radius: 14px;
}

.contador {
  text-align: center;
  margin: 20px 0 30px;
  font-size: 1.1em;
  color: #d7ede2;
}

.hidden { opacity: 0.18; }

.assinatura {
  text-align: right;
  margin-top: 40px;
  font-style: italic;
  opacity: 0;
  transition: opacity 4s ease;
}

.cursor {
  animation: blink 1s infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}

/* DEBUG */
#debugBox {
  position: fixed;
  bottom: 12px;
  left: 12px;
  opacity: 0.25;
}
#debugBox:hover { opacity: 1; }

#debugInput {
  background: rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.2);
  color: #fff;
  padding: 6px;
  border-radius: 6px;
}
</style>
</head>

<body>

<div class="container">
  <h1 style="text-align:center">üéÑ Algo especial est√° guardado aqui üéÅ</h1>
  <div class="contador" id="contador"></div>
  <div id="mensagem"></div>
</div>

<div id="debugBox">
  <input id="debugInput" placeholder="‚åò comando secreto">
</div>

<audio id="ambient" src="ambient.mp3" loop></audio>
<audio id="reveal" src="reveal.mp3" loop></audio>
<audio id="type" src="type.mp3"></audio>

<script>
const dataLiberacao = new Date(2025, 11, 25, 0, 2, 0);
const salvo = localStorage.getItem("mensagem_revelada");

const textoCifrado = [
  "J√≥ f√≥cz ra ykdf oco wd yfbmzje t qf hhvuzra zy mcsso ptyo.",
  "Czsks hqt qbt tchg vvtt eukpbcra, fqpfyo avtrdzmrr."
];

const linhas = [
  "H√° algo em voc√™ que me acalma e me desarma ao mesmo tempo.",
  "Algo que n√£o pede explica√ß√£o, apenas presen√ßa.",
  "O que sinto por voc√™ √© tranquilo, forte e verdadeiro."
];

const assinatura = "‚Äî Do seu Tabacudo de S√£o Paulo, S. Luiz";

const mensagem = document.getElementById("mensagem");
const contador = document.getElementById("contador");
const ambient = document.getElementById("ambient");
const reveal = document.getElementById("reveal");
const typeSound = document.getElementById("type");

let revelando = false;
let linhaAtual = 0;
let charAtual = 0;
let textoAtual = "";

ambient.volume = 0.4;
reveal.volume = 0.4;
typeSound.volume = 0.2;

ambient.play().catch(()=>{});

function atualizar() {
  const agora = new Date();

  if (salvo) {
    contador.innerHTML = "‚ú® Para sempre revelado ‚ú®";
    mensagem.innerHTML = salvo;
    return;
  }

  if (agora >= dataLiberacao) {
    if (!revelando) iniciarRevelacao();
    contador.innerHTML = "‚ú® A mensagem foi revelada ‚ú®";
    return;
  }

  mensagem.innerHTML =
    `<p class="hidden">${textoCifrado.join("<br><br>")}</p>`;

  const diff = dataLiberacao - agora;
  const d = Math.floor(diff / 86400000);
  const h = Math.floor(diff / 3600000 % 24);
  const m = Math.floor(diff / 60000 % 60);
  const s = Math.floor(diff / 1000 % 60);

  contador.innerHTML = `‚è≥ ${d}d ${h}h ${m}m ${s}s`;
}

function iniciarRevelacao() {
  revelando = true;
  ambient.pause();
  reveal.play();
  mensagem.innerHTML = "";
  digitar();
}

function digitar() {
  if (linhaAtual < linhas.length) {
    const linha = linhas[linhaAtual];
    if (charAtual < linha.length) {
      typeSound.currentTime = 0;
      typeSound.play();
      textoAtual += linha[charAtual++];
      mensagem.innerHTML = textoAtual + '<span class="cursor">|</span>';
      setTimeout(digitar, 45);
    } else {
      textoAtual += "\n\n";
      linhaAtual++;
      charAtual = 0;
      setTimeout(digitar, 400);
    }
  } else {
    mensagem.innerHTML = textoAtual;
    const sign = document.createElement("div");
    sign.className = "assinatura";
    sign.textContent = assinatura;
    mensagem.appendChild(sign);
    setTimeout(()=>sign.style.opacity=1,600);

    localStorage.setItem("mensagem_revelada", mensagem.innerHTML);
  }
}

document.getElementById("debugInput").addEventListener("keydown", e => {
  if (e.key === "Enter" && e.target.value.toLowerCase() === "flor de gyovana") {
    iniciarRevelacao();
  }
});

setInterval(atualizar, 1000);
atualizar();
</script>

</body>
</html>
